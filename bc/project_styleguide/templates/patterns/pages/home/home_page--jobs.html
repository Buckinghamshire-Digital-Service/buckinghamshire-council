{% extends base_page_template %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block extra_css %}
    {# Hero image background images #}
    {% image page.hero_image fill-450x350 as mobile_image %}
    {% image page.hero_image fill-900x700 as retina_mobile_image %}
    {% image page.hero_image fill-1440x350 as desktop_image %}
    {% include "patterns/atoms/image/background-image-style.html" with class="hero" mobile_image=mobile_image retina_mobile_image=retina_mobile_image desktop_image=desktop_image %}
{% endblock %}

{% block body_class %}template-jobs-home {{ block.super }}{% endblock %}

{% block hero %}
    {% include "patterns/molecules/hero/hero--jobs-home.html" %}
{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block content %}

    {% if page.benefits_list %}
        {% include "patterns/molecules/benefits-list/benefits-list.html" with benefits_list=page.benefits_list %}
    {% endif %}

    <section class="categories" aria-labelledby="job-cat-title">
        <h2 class="heading heading--xl" id="job-cat-title">Search top job categories</h2>

        <div class="categories__grid grid grid--categories">
            {% for cat in job_categories|slice:":6" %}
                {% if cat.count %}
                    <a class="categories__card link--alt" href="search/?category={{cat.key}}">
                        <div class="categories__card-icon-wrap">
                            <div class="categories__icon-blob">
                                {% include "patterns/atoms/icons/icon.html" with name="blob" classname="icon--categories-blob" %}
                            </div>

                            {# TODO: replace icon name with variable #}
                            {% include "patterns/atoms/icons/icon.html" with name="briefcase" classname="categories__card-icon" %}
                        </div>

                        <div>
                            <h3 class="categories__category-title heading">
                                <span class="categories__category-title-label">{{ cat.label }}</span>
                            </h3>
                            <p class="categories__job-count">{{ cat.count }} jobs</p>
                        </div>
                    </a>
                {% endif %}
            {% endfor %}
        </div>

        <p class="categories__all-vacancies-wrap">
           <a class="categories__all-vacancies-link" href="search/">See all {{ vacancies }} current vacancies</a>
        </p>
    </section>

    {% if page.awards %}
        {% include "patterns/molecules/awards-block/awards-block.html" with awards_snippet=page.awards %}
    {% endif %}
{% endblock %}
